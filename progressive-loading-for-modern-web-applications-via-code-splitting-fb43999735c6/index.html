<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/app.14df555390639bcec640.css">code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{overflow:auto;padding:1em}pre[class*=language-]::-moz-selection{background:#27292a}pre[class*=language-]::selection{background:#27292a}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:hsla(0,0%,100%,.15)}pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;background:rgba(255,229,100,.2);color:#1a1a1a;padding:.15em .2em .05em;white-space:normal}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#637777}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #ffa7c4}.gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}</style><meta name="generator" content="Gatsby 2.0.29"/><script>window.__EMOTION_CRITICAL_CSS_IDS__ = ["1x0l29j","s2cjas","1ptyxcl","1l1dftb","1mpn83","1amu95n","1ugh7vk","j4gise","a1zygu","1trdsxq","1eugmea","kufnxr","t0tfly","16mjt3a","vyvttm","wvuzp6","25mjrn","cniab2","1im5alu","29d3h2","njyqyw","et0m70","m5hopj","ldwdh4","1y0hjh3","hqmk9f","1o98v2d","12kejdt","v1cwdx","1d05jhl","qbcumt","y0gtj6","1x76w68","1mqgav7","t8u9qr","8kte6t","123mfn9","z4f0wj","8kn4zf","1pcdrot","1uyhyqd","zb10i8","j0kq43"];</script><style>.css-1x0l29j{position:relative;padding:0 4vw;}.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}.css-1ptyxcl{z-index:100;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.css-1l1dftb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;padding:10px;color:#fff;opacity:0.8;}.css-1l1dftb:hover{opacity:1;}.css-1l1dftb svg{height:1.8rem;fill:#fff;}.css-1mpn83{position:relative;padding-top:12px;padding-bottom:12px;color:#fff;background:#0a0b0c no-repeat center center;background-size:cover;}.css-1amu95n{position:relative;padding-top:20px;padding-bottom:60px;color:#fff;background:#000;}.css-1ugh7vk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(255,255,255,0.7);font-size:1.3rem;}.css-1ugh7vk a{color:rgba(255,255,255,0.7);}.css-1ugh7vk a:hover{color:rgba(255,255,255,1);-webkit-text-decoration:none;text-decoration:none;}@media (max-width:650px){.css-1ugh7vk{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}.css-j4gise{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:block;margin-right:24px;padding:11px 0;color:#fff;font-size:1.7rem;line-height:1em;font-weight:bold;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;}.css-j4gise:hover{-webkit-text-decoration:none;text-decoration:none;}.css-j4gise img{display:block;width:auto;height:21px;}.css-a1zygu{position:relative;z-index:300;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;overflow-y:hidden;height:40px;font-size:1.2rem;}.css-1trdsxq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none;}.css-1trdsxq li{display:block;margin:0;padding:0;text-transform:uppercase;}.css-1trdsxq li a{display:block;margin:0;padding:10px 12px;color:#fff;opacity:0.8;}.css-1trdsxq li a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}.css-1eugmea{-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 20px 40px;min-height:300px;background:#fff center center;background-size:cover;border-radius:5px;box-shadow:rgba(39,44,49,0.06) 8px 14px 38px,rgba(39,44,49,0.03) 1px 3px 8px;-webkit-transition:all 0.5s ease;transition:all 0.5s ease;}.css-1eugmea:hover{box-shadow:rgba(39,44,49,0.07) 8px 28px 50px,rgba(39,44,49,0.04) 1px 6px 12px;-webkit-transition:all 0.4s ease;transition:all 0.4s ease;-webkit-transform:translate3D(0,-1px,0) scale(1.02);-ms-transform:translate3D(0,-1px,0) scale(1.02);transform:translate3D(0,-1px,0) scale(1.02);}.css-kufnxr{position:relative;display:block;overflow:hidden;border-radius:5px 5px 0 0;}.css-t0tfly{position:relative;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:block;padding:25px 25px 0;color:#15171A;}.css-t0tfly:hover{-webkit-text-decoration:none;text-decoration:none;}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:"";content:none;}table{border-spacing:0;border-collapse:collapse;}img{max-width:100%;}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}*,*:before,*:after{box-sizing:inherit;}a{background-color:transparent;}a:active,a:hover{outline:0;}b,strong{font-weight:bold;}i,em,dfn{font-style:italic;}h1{margin:0.67em 0;font-size:2em;}small{font-size:80%;}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}img{border:0;}svg:not(:root){overflow:hidden;}mark{background-color:#fdffb6;}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em;}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit;}button{overflow:visible;border:none;}button,select{text-transform:none;}button,html input[type="button"],input[type="reset"],input[type="submit"]{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}input{line-height:normal;}input:focus{outline:none;}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0;}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto;}input[type="search"]{box-sizing:content-box;-webkit-appearance:textfield;}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}legend{padding:0;border:0;}textarea{overflow:auto;}table{border-spacing:0;border-collapse:collapse;}td,th{padding:0;}html{overflow-x:hidden;overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0);}body{overflow-x:hidden;color:#3b474d;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;font-size:1.5rem;line-height:1.6em;font-weight:400;font-style:normal;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:"liga" on;}::selection{text-shadow:none;background:#cbeafb;}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #e4eaed;}audio,canvas,iframe,img,svg,video{vertical-align:middle;}fieldset{margin:0;padding:0;border:0;}textarea{resize:vertical;}p,ul,ol,dl,blockquote{margin:0 0 1.5em 0;}ol,ul{padding-left:1.3em;padding-right:1.5em;}ol ol,ul ul,ul ol,ol ul{margin:0.5em 0 1em;}ul{list-style:disc;}ol{list-style:decimal;}ul,ol{max-width:100%;}li{margin:0.5em 0;padding-left:0.3em;line-height:1.6em;}dt{float:left;margin:0 20px 0 0;width:120px;color:#15171A;font-weight:500;text-align:right;}dd{margin:0 0 5px 0;text-align:left;}blockquote{margin:1.5em 0;padding:0 1.6em 0 1.6em;border-left:#e5eff5 0.5em solid;}blockquote p{margin:0.8em 0;font-size:1.2em;font-weight:300;}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;font-size:0.9em;opacity:0.8;}blockquote small:before{content:"\2014 \00A0";}blockquote cite{font-weight:bold;}blockquote cite a{font-weight:normal;}a{color:#26a6ed;-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.15;font-weight:700;text-rendering:optimizeLegibility;}h1{margin:0 0 0.5em 0;font-size:5rem;font-weight:700;}@media (max-width:500px){h1{font-size:2.2rem;}}h2{margin:1.5em 0 0.5em 0;font-size:2rem;}@media (max-width:500px){h2{font-size:1.8rem;}}h3{margin:1.5em 0 0.5em 0;font-size:1.8rem;font-weight:500;}@media (max-width:500px){h3{font-size:1.7rem;}}h4{margin:1.5em 0 0.5em 0;font-size:1.6rem;font-weight:500;}h5{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}h6{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}body{background:#f4f8fb;}.css-vyvttm{position:relative;z-index:50;}.css-wvuzp6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.css-wvuzp6 .site-main{background:#fff;padding-bottom:4vw;}.css-25mjrn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;margin-right:10px;padding-bottom:80px;-webkit-letter-spacing:0.4px;-moz-letter-spacing:0.4px;-ms-letter-spacing:0.4px;letter-spacing:0.4px;white-space:nowrap;-ms-overflow-scrolling:touch;}@media (max-width:700px){.css-25mjrn{margin-right:0;padding-left:4vw;}}.css-cniab2{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;}@media (max-width:700px){.css-cniab2{display:none;}}.css-1im5alu{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-1im5alu a:last-of-type{padding-right:20px;}.css-29d3h2{margin:0 auto;padding:6vw 3vw 3vw;max-width:1040px;text-align:center;}@media (max-width:500px){.css-29d3h2{padding:14vw 3vw 10vw;}}.css-njyqyw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#738a94;font-size:1.4rem;font-weight:600;text-transform:uppercase;}@media (max-width:500px){.css-njyqyw{font-size:1.2rem;line-height:1.3em;}}.css-et0m70{color:#3eb0ef;}.css-m5hopj{display:inline-block;margin:0 6px 1px;}.css-ldwdh4{margin:0;color:#0b0c0e;}@media (max-width:500px){.css-ldwdh4{font-size:2.9rem;}}.css-1y0hjh3{margin:0 -10vw -165px;height:800px;background:#c5d2d9 center center;background-size:cover;border-radius:5px;}@media (max-width:1170px){.css-1y0hjh3{margin:0 -4vw -100px;height:600px;border-radius:0;}}@media (max-width:800px){.css-1y0hjh3{height:400px;}}@media (max-width:500px){.css-1y0hjh3{margin-bottom:4vw;height:350px;}}.css-hqmk9f{position:relative;margin:0 auto;padding:70px 100px 0;min-height:230px;font-family:Georgia,serif;font-size:2.2rem;line-height:1.6em;background:#fff;}@media (max-width:1170px){.css-hqmk9f{padding:5vw 7vw 0;}}@media (max-width:800px){.css-hqmk9f{font-size:1.9rem;}}.css-hqmk9f:before{content:'';position:absolute;top:15px;left:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(-5deg);-ms-transform:rotate(-5deg);transform:rotate(-5deg);}.css-hqmk9f:after{content:'';position:absolute;top:15px;right:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(5deg);-ms-transform:rotate(5deg);transform:rotate(5deg);}.css-hqmk9f h1,.css-hqmk9f h2,.css-hqmk9f h3,.css-hqmk9f h4,.css-hqmk9f h5,.css-hqmk9f h6,.css-hqmk9f p,.css-hqmk9f ul,.css-hqmk9f ol,.css-hqmk9f dl,.css-hqmk9f pre,.css-hqmk9f blockquote,.css-hqmk9f .post-full-comments,.css-hqmk9f .footnotes{min-width:100%;}.css-hqmk9f li{word-break:break-word;}.css-hqmk9f li p{margin:0;}.css-hqmk9f a{color:#000;word-break:break-word;box-shadow:#3eb0ef 0 -1px 0 inset;}.css-hqmk9f a:hover{color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;}.css-hqmk9f strong,.css-hqmk9f em{color:#0a0b0c;}.css-hqmk9f small{display:inline-block;line-height:1.6em;}.css-hqmk9f li:first-child{margin-top:0;}.css-hqmk9f img,.css-hqmk9f video{display:block;margin:1.5em auto;max-width:1040px;height:auto;}@media (max-width:1040px){.css-hqmk9f img,.css-hqmk9f video{width:100%;}}.css-hqmk9f img[src$='#full']{max-width:none;width:100vw;}.css-hqmk9f img + br + small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-hqmk9f iframe{margin:0 auto !important;}.css-hqmk9f blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:#3eb0ef 3px solid;}.css-hqmk9f blockquote p{margin:0 0 1em 0;color:inherit;font-size:inherit;line-height:inherit;font-style:italic;}.css-hqmk9f blockquote p:last-child{margin-bottom:0;}.css-hqmk9f code{padding:0 5px 2px;font-size:0.8em;line-height:1em;font-weight:400 !important;background:#e5eff5;border-radius:3px;}.css-hqmk9f p code{word-break:break-all;}.css-hqmk9f pre{overflow-x:auto;padding:20px;max-width:100%;border:#131517 1px solid;color:#e5eff5;font-size:1.4rem;line-height:1.5em;background:#0e1012;border-radius:5px;}.css-hqmk9f pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent;}.css-hqmk9f pre code:not(span){color:inherit;}.css-hqmk9f .gatsby-resp-iframe-wrapper{margin:1.5em 0 3em;}.css-hqmk9f hr{margin:4vw 0;}.css-hqmk9f hr:after{content:'';position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#e4eaed;box-shadow:#fff 0 0 0 5px;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.css-hqmk9f h1,.css-hqmk9f h2,.css-hqmk9f h3,.css-hqmk9f h4,.css-hqmk9f h5,.css-hqmk9f h6{color:#0b0c0e;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;}.css-hqmk9f h1{margin:0.5em 0 0.2em 0;font-size:4.6rem;font-weight:700;}@media (max-width:500px){.css-hqmk9f h1{font-size:2.8rem;}}.css-hqmk9f h2{margin:0.5em 0 0.2em 0;font-size:3.6rem;font-weight:700;}@media (max-width:500px){.css-hqmk9f h2{font-size:2.6rem;}}.css-hqmk9f h3{margin:0.5em 0 0.2em 0;font-size:2.8rem;font-weight:700;}@media (max-width:500px){.css-hqmk9f h3{font-size:2.2rem;}}.css-hqmk9f h4{margin:0.5em 0 0.2em 0;font-size:2.8rem;font-weight:700;}@media (max-width:500px){.css-hqmk9f h4{font-size:2.2rem;}}.css-hqmk9f h5{display:block;margin:0.5em 0;padding:1em 0 1.5em;border:0;color:#3eb0ef;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center;}@media (min-width:1180px){.css-hqmk9f h5{max-width:1060px;}}@media (max-width:500px){.css-hqmk9f h5{padding:0 0 0.5em;font-size:2.2rem;}}.css-hqmk9f h6{margin:0.5em 0 0.2em 0;font-size:2.3rem;font-weight:700;}@media (max-width:500px){.css-hqmk9f h6{font-size:2rem;}}.css-hqmk9f table{display:inline-block;overflow-x:auto;margin:0.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;}.css-hqmk9f table{-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 0 center,radial-gradient(ellipse at right,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 100% center;background-attachment:scroll,scroll;background-size:10px 100%,10px 100%;background-repeat:no-repeat;}.css-hqmk9f table td:first-child{background-image:linear-gradient( to right,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-size:20px 100%;background-repeat:no-repeat;}.css-hqmk9f table td:last-child{background-image:linear-gradient( to left,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-position:100% 0;background-size:20px 100%;background-repeat:no-repeat;}.css-hqmk9f table th{color:#15171A;font-size:1.2rem;font-weight:700;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;text-align:left;text-transform:uppercase;background-color:#f4f8fb;}.css-hqmk9f table th,.css-hqmk9f table td{padding:6px 12px;border:#e9ebec 1px solid;}@media (max-width:500px){.css-hqmk9f{padding:0;}.css-hqmk9f:before{display:none;}.css-hqmk9f:after{display:none;}}.css-1o98v2d{margin:0 auto;padding:3vw 0 6vw 0;max-width:840px;}.css-12kejdt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -20px;padding:40px 0 0 0;}.css-v1cwdx{position:relative;-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 20px 40px;padding:25px;color:#fff;background:#15171A center center;background-size:cover;border-radius:5px;box-shadow:rgba(39,44,49,0.06) 8px 14px 38px,rgba(39,44,49,0.03) 1px 3px 8px;background-image:url("/static/blog-cover-f55e924eff608d71da37e57b398c587d-f4589.jpg");}.css-v1cwdx:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;display:block;background:linear-gradient(135deg,rgba(0,40,60,0.8) 0%,rgba(0,20,40,0.7) 100%);border-radius:5px;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);}.css-1d05jhl{position:relative;z-index:50;padding-top:20px;text-align:center;}.css-qbcumt{display:block;font-size:1.3rem;line-height:1.3em;opacity:0.8;}.css-y0gtj6{margin:0;padding:0 20px;color:#fff;font-size:3rem;line-height:1.2em;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;}.css-y0gtj6 a{color:#fff;font-weight:300;-webkit-text-decoration:none;text-decoration:none;}.css-y0gtj6 a:hover{-webkit-text-decoration:none;text-decoration:none;}.css-1x76w68{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:80px;}.css-1x76w68 svg{width:40px;fill:transparent;stroke:#fff;stroke-width:0.5px;stroke-opacity:0.65;}.css-1mqgav7{position:relative;z-index:50;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:1.7rem;}.css-1mqgav7 ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 auto;padding:0;text-align:center;list-style:none;}.css-1mqgav7 li{margin:0;padding:0;font-size:1.6rem;line-height:1.25em;font-weight:200;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;}.css-1mqgav7 li a{display:block;padding:20px 0;border-bottom:rgba(255,255,255,0.3) 1px solid;color:#fff;font-weight:500;vertical-align:top;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;}.css-1mqgav7 li:first-of-type a{padding-top:10px;}.css-1mqgav7 li a:hover{opacity:1;}.css-t8u9qr{position:relative;margin:15px 0 3px 0;text-align:center;}.css-t8u9qr a{color:#fff;}.css-8kte6t{width:auto;height:200px;background:#c5d2d9 no-repeat center center;background-size:cover;}.css-123mfn9{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.css-z4f0wj{display:block;margin-bottom:4px;color:#738a94;font-size:1.2rem;line-height:1.15em;font-weight:500;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;text-transform:uppercase;}.css-8kn4zf{margin-top:0;}.css-1pcdrot{font-family:Georgia,serif;}.css-1uyhyqd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;padding:0 25px 25px;}.css-zb10i8{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-left:20px;color:#738a94;font-size:1.2rem;line-height:33px;font-weight:500;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;text-transform:uppercase;}.css-j0kq43{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-j0kq43 a{position:relative;margin-left:20px;}.css-j0kq43 a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-j0kq43 a:first-of-type:before{display:none;}@media (max-width:650px){.css-j0kq43 a:first-child{margin-left:0;}}</style><link rel="canonical" href="https://lavrton.com/blog/progressive-loading-for-modern-web-applications-via-code-splitting-fb43999735c6/" data-baseprotocol="https:" data-basehost="lavrton.com"/><title data-react-helmet="true">Progressive loading for modern web applications via code splitting</title><meta data-react-helmet="true" property="og:site_name" content="Anton Lavrenov Blog"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Progressive loading for modern web applications via code splitting"/><meta data-react-helmet="true" property="og:description" content="Progressive loading for modern web applications via code splitting Are your users tired of waiting when your app is loading and they close…"/><meta data-react-helmet="true" property="og:url" content="https://lavrton.com/progressive-loading-for-modern-web-applications-via-code-splitting-fb43999735c6/"/><meta data-react-helmet="true" property="og:image" content="https://lavrton.com/static/progressive-loading-cover-1f9447eff0c9806d91cdbe43fb14f215-d6c8a.jpg"/><meta data-react-helmet="true" property="article:published_time" content="2016-07-20"/><meta data-react-helmet="true" property="article:tag" content="javascript"/><meta data-react-helmet="true" property="article:publisher" content="https://twitter.com/lavrton"/><meta data-react-helmet="true" property="article:author" content="https://twitter.com/lavrton"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Progressive loading for modern web applications via code splitting"/><meta data-react-helmet="true" name="twitter:description" content="Progressive loading for modern web applications via code splitting Are your users tired of waiting when your app is loading and they close…"/><meta data-react-helmet="true" name="twitter:url" content="https://lavrton.com/progressive-loading-for-modern-web-applications-via-code-splitting-fb43999735c6/"/><meta data-react-helmet="true" name="twitter:image" content="https://lavrton.com/static/progressive-loading-cover-1f9447eff0c9806d91cdbe43fb14f215-d6c8a.jpg"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="Anton"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="javascript"/><meta data-react-helmet="true" name="twitter:site" content="@lavrton"/><meta data-react-helmet="true" name="twitter:creator" content="@lavrton"/><meta data-react-helmet="true" property="og:image:width" content="1200"/><meta data-react-helmet="true" property="og:image:height" content="800"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-05af483339175af74fab.js"/><link as="script" rel="preload" href="/app-000611dd77e457cd15db.js"/><link as="script" rel="preload" href="/0-edb3633e63dda594e086.js"/><link as="script" rel="preload" href="/2-dc7883950a7377cf1320.js"/><link as="script" rel="preload" href="/3-c32ed1c65139157120f2.js"/><link as="script" rel="preload" href="/1-266c3f24045dc3f61392.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-b34a048d6b44c5a8f584.js"/><link rel="preload" href="/static/d/488/path---progressive-loading-for-modern-web-applications-via-code-splitting-fb-43999735-c-6-f-2-c-d7f-fxD7jAoMOOYNIMINJYHU9KCqw.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="post-template"><div class="css-wvuzp6 e16n03ac0"><header class="css-1mpn83 css-1x0l29j"><div class="css-s2cjas"><nav class=" css-a1zygu"><div class="css-25mjrn eey3yda0"><a class="css-j4gise site-nav-logo" href="/"><img src="/static/logo-959faec6c99ee421c10fe433dc96bf9b-51380.png" alt="Anton Lavrenov Blog"/></a><ul class="css-1trdsxq" role="menu"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/consulting">Consulting</a></li><li role="menuitem"><a href="/tags/canvas/">Canvas</a></li><li role="menuitem"><a href="/tags/javascript/">Javascript</a></li><li role="menuitem"><a href="/tags/react/">React</a></li></ul></div><div class="css-cniab2 eey3yda1"><div class="css-1im5alu eey3yda2"><a class="css-1l1dftb" href="https://twitter.com/lavrton" title="Twitter" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg></a></div></div></nav></div></header><main id="site-main" class="site-main css-1ptyxcl css-1x0l29j"><div class="css-s2cjas"><article class="css-vyvttm "><header class="css-29d3h2 e1qa4i0i0"><section class="css-njyqyw e1qa4i0i1"><time dateTime="2016-07-20" class="css-et0m70 e1qa4i0i2">20 July 2016</time><span class="css-m5hopj e1qa4i0i5">/</span><a href="/tags/javascript/">javascript</a></section><h1 class="css-ldwdh4 e1qa4i0i3">Progressive loading for modern web applications via code splitting</h1></header><figure class="css-1y0hjh3 e1qa4i0i4"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:66.66666666666667%"></div><img alt="" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB4DpSsoyP/8QAGRAAAgMBAAAAAAAAAAAAAAAAABEBAhAx/9oACAEBAAEFAhZQRPf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAEAAwEAAAAAAAAAAAAAAAABABAhEf/aAAgBAQABPyEO21kQUf/aAAwDAQACAAMAAAAQm8//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAn/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEh/9oACAECAQE/EFB//8QAFxABAQEBAAAAAAAAAAAAAAAAAREAUf/aAAgBAQABPxBxdXMkZppGAWZ1b//Z" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/progressive-loading-cover-1f9447eff0c9806d91cdbe43fb14f215-2b9a2.jpg 930w,
/static/progressive-loading-cover-1f9447eff0c9806d91cdbe43fb14f215-d6c8a.jpg 1200w" sizes="(max-width: 1200px) 100vw, 1200px" /><img src="/static/progressive-loading-cover-1f9447eff0c9806d91cdbe43fb14f215-d6c8a.jpg" alt="" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><section class="post-full-content css-hqmk9f eqwqi9m0"><div><h1>Progressive loading for modern web applications via code splitting</h1>
<p>Are your users tired of waiting when your app is loading and they close the tab? Let’s fix it with the progressive loading!</p>
<p>I will use <strong>webpack</strong> for bundling and React for a demonstration.</p>
<p>I am compiling and bundling all my javascript files (sometimes css and images too) into ONE HUGE bundle.js. I guess you are doing this too, aren’t you? It is a pretty common approach for making modern web applications.</p>
<p>But this approach has one (sometimes very important) drawback: first loading of your app may take too much time. As a web browser have to (1) load large file and (2) parse a lot of javascript code. And loading can take really much time if a user has bad internet connection. Also, your bundled file can have components that user will never see (e.g. user will never open some parts of your application).</p>
<h2>Progressive Web Apps?</h2>
<p>One of the good solutions for better UX is Progressive Web App. Google this term if you don’t know it yet. There are tons of good posts and videos about it. So Progressive Web has several core ideas, but right now I want to focus on Progressive Loading and implement it .</p>
<p>The idea of Progressive Loading is very simple:</p>
<ol>
<li>Make “initial load” as fast as possible.</li>
<li>Load UI components only when they are required.</li>
</ol>
<p>Let us assume we have React Application that draws some charts on a page:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> LineChart <span class="token keyword">from</span> <span class="token string">&#x27;./LineChart&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> BarChart <span class="token keyword">from</span> <span class="token string">&#x27;./BarChart&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token comment">// do not show charts on first loading</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        showCharts<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// toggle charts</span>
    <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            showCharts<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>showCharts
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                Show charts<span class="token punctuation">:</span>
                <span class="token operator">&lt;</span>input
                  type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span>
                  value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>showCharts<span class="token punctuation">}</span>
                  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>

                <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>showCharts <span class="token operator">?</span>
                    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>LineChart<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>BarChart<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                    <span class="token punctuation">:</span> <span class="token keyword">null</span>
                <span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Chart components are very simple:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// LineChart.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Stage<span class="token punctuation">,</span> Layer<span class="token punctuation">,</span> Line<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react-konva&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Stage width<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">}</span> height<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Layer<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Line stroke<span class="token operator">=</span><span class="token string">&quot;green&quot;</span> points<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Layer<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Stage<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// BarChart.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Stage<span class="token punctuation">,</span> Layer<span class="token punctuation">,</span> Rect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react-konva&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Stage width<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">}</span> height<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Layer<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Rect fill<span class="token operator">=</span><span class="token string">&quot;red&quot;</span> width<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">20</span><span class="token punctuation">}</span> height<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Rect fill<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span> x<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span> width<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">20</span><span class="token punctuation">}</span> height<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Layer<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Stage<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>These charts can be very heavy. Both of them have <a href="https://github.com/lavrton/react-konva" target="_blank" rel="nofollow noopener noreferrer">react-konva</a> as a dependency (and <a href="https://konvajs.github.io/" target="_blank" rel="nofollow noopener noreferrer">konva</a> framework as a dependency of <a href="https://github.com/lavrton/react-konva" target="_blank" rel="nofollow noopener noreferrer">react-konva</a>).</p>
<p>Please note that <code class="language-text">LineChart</code> and <code class="language-text">BarChart</code> are not visible on the first load. To see them a user needs to toggle checkbox:</p>
<p>
  <a class="gatsby-resp-image-link" href="/static/progress-image-1-26a99782be857a3cee118968e4df8886-fed64.png" style="display:block" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;max-width:696px;margin-left:auto;margin-right:auto">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:50.43103448275862%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABA0lEQVQoz42R0U6DMBSGeUQTL3anj7ALE59jz+MDmHgzQgQlLkxGBVq1tEDLKBSOBeLMMrfwXfSctOf/T3tqua7r+z5CyLbX2zCKmYZf+r43a5qkjuOYAtfzgs3rw/M++JpOweIjQghCCON5XnVwTExjSqmUsuAlz77fcEPlKAaw4Dz9UACfghR1bpIdDzs4srZOBCfikrCKFXXxgj1S4sNz4HLnCdXsE4Z2Wag7HdJQNvJs539vvk7sJI9NIpR4p9v5YoBWf+CNbKVS0CrAZcqqbPK9KNbjt61W3dW1ifd3erkcVFXdzOg8DSYI9OOTibc3/WIxbLQtzB3YAYQgiv48DT/iZEDlKRaRxAAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block">
      <img class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white" alt="Chart demo" title="" src="/static/progress-image-1-26a99782be857a3cee118968e4df8886-fed64.png" srcSet="/static/progress-image-1-26a99782be857a3cee118968e4df8886-9a0c0.png 293w, /static/progress-image-1-26a99782be857a3cee118968e4df8886-1bf5a.png 585w, /static/progress-image-1-26a99782be857a3cee118968e4df8886-fed64.png 696w" sizes="(max-width: 696px) 100vw, 696px"/>
    </span>
  </span>
  
  </a>
    </p>
<p>So it is possible that the user will NEVER toggle that checkbox. And this is a very common situation in real world web application: when a user never opens some parts of the app (or open them later). But with a current approach, we have to bundle all components and all their dependencies into one file. In this example we have: root App component, React, Chart components, react-konva, konva.</p>
<p>
  <a class="gatsby-resp-image-link" href="/static/progress-image-2-9e7e624f3f24cade8e52d09a5f995164-949e7.png" style="display:block" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;max-width:624px;margin-left:auto;margin-right:auto">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:21.474358974358974%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAApUlEQVQI121OywqDMBDM//9WPVtBPFRpTcxTkTSv0rhi7YIUPHROw8zO7JC6ri9F0T/uKSXvfQjBOfc8YZ5nrfXBrbUxRiFEWV6V0gQNKdWgRmOMlJJzjtdY4X/ALswcHHV0hZSMMSQkxbjAyoztuq5pmqqqhoEDwPIPOWd8hkmjdUovkt8ZVgjOGK3a9kYp7SnF8L7vnxO2bUMFV+AUXD9OE8D6Bdop3mXbLS/lAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block">
      <img class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white" alt="Bundle size" title="" src="/static/progress-image-2-9e7e624f3f24cade8e52d09a5f995164-949e7.png" srcSet="/static/progress-image-2-9e7e624f3f24cade8e52d09a5f995164-62d49.png 293w, /static/progress-image-2-9e7e624f3f24cade8e52d09a5f995164-f1428.png 585w, /static/progress-image-2-9e7e624f3f24cade8e52d09a5f995164-949e7.png 624w" sizes="(max-width: 624px) 100vw, 624px"/>
    </span>
  </span>
  
  </a>
    </p>
<p>
  <a class="gatsby-resp-image-link" href="/static/progress-image-3-693ff8fb9d421599bd6b3b0d0bdef970-10f62.png" style="display:block" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;max-width:1066px;margin-left:auto;margin-right:auto">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:13.696060037523452%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAk0lEQVQI1w2Kiw6DIBRD/f/f08wtmyMKBgR5OtiUx91tmqY9aZfSt9aac0FhYPchSKlw7lpfV26tWevEJmupMSZjHb6U2vHdjYsRH1h9QzNX+QEP5m6zxjkQObwVtXnajkkEHoC50hN1p2YxCGP3JGzd9FkA/cstN5DGS+2vCoTy3R1ImFD9+PLxRDjNK+WyACgT/soMqOtgW4bRAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block">
      <img class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white" alt="Network usage" title="" src="/static/progress-image-3-693ff8fb9d421599bd6b3b0d0bdef970-10f62.png" srcSet="/static/progress-image-3-693ff8fb9d421599bd6b3b0d0bdef970-99e81.png 293w, /static/progress-image-3-693ff8fb9d421599bd6b3b0d0bdef970-efbb9.png 585w, /static/progress-image-3-693ff8fb9d421599bd6b3b0d0bdef970-10f62.png 1066w" sizes="(max-width: 1066px) 100vw, 1066px"/>
    </span>
  </span>
  
  </a>
    </p>
<p>280kb for <code class="language-text">bundle.js</code> and 3.5 seconds for initial loading with a regular 3g connection.</p>
<h2>Implementing Progressive Loading</h2>
<p>How can we remove these chart components from bundle.js and load them later and draw something meaningful as fast as possible? Say hello to good old <a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank" rel="nofollow noopener noreferrer">AMD</a> (asynchronous module definition)! And webpack has good support for <a href="https://github.com/webpack/docs/wiki/code-splitting" target="_blank" rel="nofollow noopener noreferrer">code splitting</a>.</p>
<p>I suggest to define HOC (higher order component) that will load chart only when a component is mounted into DOM (with <code class="language-text">componentDidMount</code> lifecycle callback). Let’s define <code class="language-text">LineChartAsync.js</code>:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">AsyncComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        component<span class="token punctuation">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// load component on mount</span>
        require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// !IMPORTANT! we can not use here something like:</span>
            <span class="token comment">//    require(this.props.path).default;</span>
            <span class="token comment">// because webpack cannot  statically analyse such imports</span>
            <span class="token comment">// so we should explicitly import required module</span>
            <span class="token keyword">const</span> Component <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./LineChart&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                component<span class="token punctuation">:</span> Component
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>component<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Then instead of</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> LineChart <span class="token keyword">from</span> ‘<span class="token punctuation">.</span><span class="token operator">/</span>LineChart’<span class="token punctuation">;</span></code></pre></div>
<p>We should write:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> LineChart <span class="token keyword">from</span> ‘<span class="token punctuation">.</span><span class="token operator">/</span>LineChartAsync’<span class="token punctuation">;</span></code></pre></div>
<p>Let us see what we have after bundling:</p>
<p>
  <a class="gatsby-resp-image-link" href="/static/progress-image-4-1ff56d7f49e46ad7ae2ff08a2a064087-18ffa.png" style="display:block" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;max-width:618px;margin-left:auto;margin-right:auto">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:34.627831715210355%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABAklEQVQY022R3XKDIBCFef8Ha26acWyNiZ1iEFEElIID/hu7Uye5sd/V7oHd5SwoDMPT6Y3SrG1bY4wFjPl5Akpd15zzPdVaw7moqvP7mRUFUlLSnBWVhKDknDFWluV+acf89XqlEAshCCFKKbTMs+2GTFpGSXSJgyCI4wuMnKZxeDKO4ytoraU0zzJirEHbtvlh4roVVQkqxji9p953oD8OgAj1dVNLKfu+R0Pf1dZhrr+/bkH4EUWfYAaGeGhwAHSwAdYyQnSj0bo+fOeV4CnGt+s1SRKM7+u6LgdA9N41TSOVgr1Ad/C8DGPfOiOFzPMc1lAJMf8H1EOBc27/Anj2L+dPh8xUapKYAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block">
      <img class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white" alt="Bundle after split" title="" src="/static/progress-image-4-1ff56d7f49e46ad7ae2ff08a2a064087-18ffa.png" srcSet="/static/progress-image-4-1ff56d7f49e46ad7ae2ff08a2a064087-31d15.png 293w, /static/progress-image-4-1ff56d7f49e46ad7ae2ff08a2a064087-a4e13.png 585w, /static/progress-image-4-1ff56d7f49e46ad7ae2ff08a2a064087-18ffa.png 618w" sizes="(max-width: 618px) 100vw, 618px"/>
    </span>
  </span>
  
  </a>
    </p>
<p>We have <code class="language-text">bundle.js</code> that includes a root App component and React.</p>
<p><code class="language-text">1.bundle.js</code> and <code class="language-text">2.bundle.js</code> are generated by webpack and they include <code class="language-text">LineChart</code> and <code class="language-text">BarChart</code>. But, wait, why is the total sum bigger? <code class="language-text">143kb+143kb+147kb = 433kb</code> vs <code class="language-text">280kb</code> from previous approach. That is because dependencies of <code class="language-text">LineChart</code> and <code class="language-text">BarChart</code> are included TWICE (<code class="language-text">react-konva</code> and <code class="language-text">konva</code> defined in both <code class="language-text">1.bundle.js</code> and <code class="language-text">2.bundle.js</code>), we can avoid this with <a href="https://webpack.github.io/docs/list-of-plugins.html#commonschunkplugin" target="_blank" rel="nofollow noopener noreferrer">webpack.optimize.CommonsChunkPlugin</a>:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    children<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// (use all children of the chunk)</span>
    <span class="token keyword">async</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// (create an async commons chunk)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre></div>
<p>
  <a class="gatsby-resp-image-link" href="/static/progress-image-5-561cc065de448c9546a159ef1eec5480-c45c5.png" style="display:block" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;max-width:610px;margin-left:auto;margin-right:auto">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:41.31147540983607%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABJ0lEQVQY03WR226DMBBE+f8Py1OIRImalnAzYLDBJhgbnDi06SSolaKo52EFaHdmd/CCINhsNgUhWhul1AjUOAzD6QEehBCMsb9XrXXbttvttiwrT0pB64ayjnNW13VRFJTSvu/VL6vQqiulpLTmvK2qqhPCW67uZGzGVV0Wb2Ho+34Yhhh2zllrzw8ul8taMZznOSZRIefdbrfp7Bo5NpSWFU2zlBAyW4vv38/cOyfDORdCokLYs/MkBp02Mo4+grfQ3+2QAq6CrTFmemaeZ1wB9TRJkIUHfW1dJeBcHuMky9Ku677+Aeb35eHMGJRx81UZQxk7RtF+vz8c3vOcLMuCJvcCnBEe9kK0yM/D6saMQ89JTqLoEzWOEzTZF5DZ+udwMDLD8A+k6735UYBrjQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block">
      <img class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white" alt="Bundle after split" title="" src="/static/progress-image-5-561cc065de448c9546a159ef1eec5480-c45c5.png" srcSet="/static/progress-image-5-561cc065de448c9546a159ef1eec5480-8fa77.png 293w, /static/progress-image-5-561cc065de448c9546a159ef1eec5480-d32bf.png 585w, /static/progress-image-5-561cc065de448c9546a159ef1eec5480-c45c5.png 610w" sizes="(max-width: 610px) 100vw, 610px"/>
    </span>
  </span>
  
  </a>
    </p>
<p>Now dependencies of <code class="language-text">LineChart</code> and <code class="language-text">BarChart</code> are moved in another file <code class="language-text">3.bundle.js</code>, total size is almost the same (289kb). Now we have 1.75 seconds for initial loading. It is much better then 3.5 seconds.</p>
<h2>Refactoring</h2>
<p>To make the code better I would like to refactor <code class="language-text">LineChartAsync</code> and <code class="language-text">BarChartAsync</code>. First, let’s define basic <code class="language-text">AsyncComponent</code>:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">AsyncComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        component<span class="token punctuation">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token punctuation">(</span>componentModule<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              component<span class="token punctuation">:</span> componentModule<span class="token punctuation">.</span><span class="token keyword">default</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">renderPlaceholder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>component<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>renderPlaceholder <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>renderPlaceholder<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

AsyncComponent<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    renderPlaceholder<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>func
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>And <code class="language-text">BarChartAsync</code> (and <code class="language-text">LineChartAsync</code>) can be rewritten into simpler component:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> AsyncComponent <span class="token keyword">from</span> <span class="token string">&#x27;./AsyncComponent&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">loader</span> <span class="token operator">=</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./BarChart&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token operator">&lt;</span>AsyncComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> loader<span class="token operator">=</span><span class="token punctuation">{</span>loader<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span></code></pre></div>
<p>But we can improve Progressive Loading even more! When application is initially loaded we can schedule loading of additional component on background, so it is possible that they will be loaded before user toggled checkbox</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> AsyncComponent <span class="token keyword">from</span> <span class="token string">&#x27;./AsyncComponent&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> sceduleLoad <span class="token keyword">from</span> <span class="token string">&#x27;./loader&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">loader</span> <span class="token operator">=</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./BarChart&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">sceduleLoad</span><span class="token punctuation">(</span>loader<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token operator">&lt;</span>AsyncComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> loader<span class="token operator">=</span><span class="token punctuation">{</span>loader<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span></code></pre></div>
<p>And <code class="language-text">loader.js</code> will be something like this:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> delay <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> isWaiting <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>


<span class="token keyword">function</span> <span class="token function">requestLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isWaiting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> loader <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    isWaiting <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token function">loader</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        isWaiting <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token function">requestLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">sceduleLoad</span><span class="token punctuation">(</span>loader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>loader<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">requestLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Also, we can define components that will visible on the first screen, but in fact loaded asynchronously later and a user may see beautiful placeholder while a component is loading. Please note that placeholder is not for API call. It is exactly for loading component’s module (its definition and all its dependencies).</p>
<p><img src="/progress-image-7-b72341dd489ea389c23aa50c3d896a3c.gif" alt="Demo"/></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">renderPlaceholder</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>textAlign<span class="token punctuation">:</span> ‘center’<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>CircularProgress<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token operator">&lt;</span>AsyncComponent
       <span class="token punctuation">{</span>…props<span class="token punctuation">}</span>
       loader<span class="token operator">=</span><span class="token punctuation">{</span>loader<span class="token punctuation">}</span>
       renderPlaceholder<span class="token operator">=</span><span class="token punctuation">{</span>renderPlaceholder<span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span></code></pre></div>
<h2>Conclusion</h2>
<p>As a result of all improvements:</p>
<ol>
<li>Initial bundle.js has a smaller size. That means a user will see some working UI components faster.</li>
<li>Additional components can be loaded asynchronously in the background.</li>
<li>While a component is loading it can be replaced with some placeholder components .</li>
<li>For exactly this approach Webpack is required. But you can use it not only with React, but with other frameworks too.</li>
</ol>
<p>Take a look <a href="https://github.com/lavrton/Progressive-Web-App-Loading" target="_blank" rel="nofollow noopener noreferrer">https://github.com/lavrton/Progressive-Web-App-Loading</a> for full source and webpack configurations.</p></div></section><hr/><div style="text-align:center"><img src="/static/anton-d0b7acc08864a814c399f5bd88540f65-2e811.jpg" alt="Anton Lavrenov" style="margin-right:25px;width:100px;border-radius:50px"/>Personal blog by <a href="https://twitter.com/lavrton">Anton Lavrenov</a>.</div><hr/><footer class="css-1o98v2d e5xc5md0"><div id="disqus_thread"></div></footer></article></div></main><aside class="read-next css-1x0l29j"><div class="css-s2cjas"><div class="css-12kejdt e1qa4i0i6"><article class="css-v1cwdx e1x0g4110"><header class="css-1d05jhl e1x0g4111"><small class="css-qbcumt e1x0g4112">— <!-- -->Anton Lavrenov Blog<!-- --> —</small><h3 class="css-y0gtj6 e1x0g4113"><a href="/tags/javascript/">javascript</a></h3></header><div class="css-1x76w68 e1x0g4114"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path></svg></div><div class="css-1mqgav7 e1x0g4115"><ul><li><a aria-current="page" class="" href="/progressive-loading-for-modern-web-applications-via-code-splitting-fb43999735c6/">Progressive loading for modern web applications via code splitting</a></li></ul></div><footer class="css-t8u9qr e1x0g4116"><a href="/tags/javascript/">1 post<!-- --> →</a></footer></article><article class="post-card css-1eugmea "><a class="css-kufnxr post-card-image-link" href="/how-to-optimise-rendering-of-a-set-of-elements-in-react-ad01f5b161ae/"><div class="post-card-image css-8kte6t e1pcw8p70"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:66.66666666666667%"></div><img alt="Tips to optimise rendering of a set of elements in React cover image" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAQT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB6FVJ0JND/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAECEgMTMv/aAAgBAQABBQLobHDh4PE8tGj/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAEBESIf/aAAgBAQAGPwIqsJX/xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhQVFhgf/aAAgBAQABPyGjhPZeW9xUUdGTmK9hZef/2gAMAwEAAgADAAAAEO8//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QJ//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxCsf//EAB0QAQEAAgEFAAAAAAAAAAAAAAERACExUXGBweH/2gAIAQEAAT8Qn9k6OHyFNA+sr4XKCYFVXznE4cPXXzLRTaXnP//Z" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/react-perf-cover-38b144b6cc2c12d3395c051cfae34ca9-2b9a2.jpg 930w,
/static/react-perf-cover-38b144b6cc2c12d3395c051cfae34ca9-d6c8a.jpg 1200w" sizes="(max-width: 1200px) 100vw, 1200px" /><img src="/static/react-perf-cover-38b144b6cc2c12d3395c051cfae34ca9-d6c8a.jpg" alt="Tips to optimise rendering of a set of elements in React cover image" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content css-123mfn9 e1pcw8p71"><a class="css-t0tfly post-card-content-link" href="/how-to-optimise-rendering-of-a-set-of-elements-in-react-ad01f5b161ae/"><header class="post-card-header"><span class="css-z4f0wj e1pcw8p72">react</span><h2 class="css-8kn4zf e1pcw8p73">Tips to optimise rendering of a set of elements in React</h2></header><section class="css-1pcdrot e1pcw8p74"><p>Tips to optimise rendering of a set of elements in React There is a guide to increase React performance. The advanced tip will increase…</p></section></a><footer class="post-card-meta css-1uyhyqd e1pcw8p75"><span class="css-zb10i8 e1pcw8p710">5<!-- --> min read</span></footer></div></article><article class="post-card css-1eugmea "><a class="css-kufnxr post-card-image-link" href="/javascript-loops-how-to-handle-async-await-6252dd3c795/"><div class="post-card-image css-8kte6t e1pcw8p70"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:66.66666666666667%"></div><img alt="JavaScript loops - how to handle async/await cover image" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQP/2gAMAwEAAhADEAAAAdrVM0clyL//xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIQERL/2gAIAQEAAQUCjHTikKv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERIDFh/9oACAEBAAE/IVJouiKH/9oADAMBAAIAAwAAABBYL//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCRj//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EKV//8QAHBABAAICAwEAAAAAAAAAAAAAAQARMVEhQXGR/9oACAEBAAE/ELXYTIFwt63UD1iccKeS237AKn//2Q==" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/async-loops-cover-65e0c41950444e874824f96dfb8e315b-2b9a2.jpg 930w,
/static/async-loops-cover-65e0c41950444e874824f96dfb8e315b-d6c8a.jpg 1200w" sizes="(max-width: 1200px) 100vw, 1200px" /><img src="/static/async-loops-cover-65e0c41950444e874824f96dfb8e315b-d6c8a.jpg" alt="JavaScript loops - how to handle async/await cover image" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content css-123mfn9 e1pcw8p71"><a class="css-t0tfly post-card-content-link" href="/javascript-loops-how-to-handle-async-await-6252dd3c795/"><header class="post-card-header"><span class="css-z4f0wj e1pcw8p72">javascript</span><h2 class="css-8kn4zf e1pcw8p73">JavaScript loops - how to handle async/await</h2></header><section class="css-1pcdrot e1pcw8p74"><p>How to run async loops in sequence or in parallel? Before doing asynchronous magic with loops I want to remind you how we write classical…</p></section></a><footer class="post-card-meta css-1uyhyqd e1pcw8p75"><span class="css-zb10i8 e1pcw8p710">3<!-- --> min read</span></footer></div></article></div></div></aside><footer class="css-1x0l29j css-1amu95n"><div class="css-s2cjas css-1ugh7vk"><section class="copyright"><a href="/">Anton Lavrenov Blog</a> © <!-- -->2018</section><nav class="css-j0kq43 e15d5ezy0"><a href="/">Latest Posts</a><a href="https://twitter.com/lavrton" target="_blank" rel="noopener noreferrer">Twitter</a><a href="/rss.xml">RSS</a></nav></div></footer></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-54202824-1', 'lavrton.com', {});
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-tsx","jsonName":"progressive-loading-for-modern-web-applications-via-code-splitting-fb-43999735-c-6-f2c","path":"/progressive-loading-for-modern-web-applications-via-code-splitting-fb43999735c6/"};window.dataPath="488/path---progressive-loading-for-modern-web-applications-via-code-splitting-fb-43999735-c-6-f-2-c-d7f-fxD7jAoMOOYNIMINJYHU9KCqw";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.14df555390639bcec640.css","/app-000611dd77e457cd15db.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-b34a048d6b44c5a8f584.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-a1dce0a19b41dbac76a7.js"],"component---src-templates-author-tsx":["/component---src-templates-author-tsx-e6b6bf59ea9888e194c7.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-d443c27a4d3c79eb4b4b.js"],"component---src-pages-consulting-tsx":["/component---src-pages-consulting-tsx-990f448398f77fc8cd4f.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-76ec27d1380faed0ad96.js"],"component---src-pages-sent-tsx":["/component---src-pages-sent-tsx-c70e6057fc22676f7745.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-b34a048d6b44c5a8f584.js" async=""></script><script src="/1-266c3f24045dc3f61392.js" async=""></script><script src="/3-c32ed1c65139157120f2.js" async=""></script><script src="/2-dc7883950a7377cf1320.js" async=""></script><script src="/0-edb3633e63dda594e086.js" async=""></script><script src="/app-000611dd77e457cd15db.js" async=""></script><script src="/webpack-runtime-05af483339175af74fab.js" async=""></script></body></html>